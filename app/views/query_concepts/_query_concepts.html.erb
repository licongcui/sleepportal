<% if @search.query_concepts.size > 0 %>
  <% @search.query_concepts.each do |query_concept| %>
    <% @query_concept = query_concept %>
    <div id="query_concept_<%= @query_concept.id %>">
      <%= render partial: 'query_concepts/show' %>
    </div>
      <% if @query_concept.position < @query_concept.search.query_concepts.size - 1 %>
        <div class="control-group">
          <div class="controls">
            <div class="qc-cancel">
              <span id="query_concept_<%= @query_concept.id %>_rop_text" onmouseover="$('#query_concept_<%= @query_concept.id %>_right_operator_edit_icon').show();" onmouseout="$('#query_concept_<%= @query_concept.id %>_right_operator_edit_icon').hide();" style="padding-left:<%= [10*(@query_concept.level - @query_concept.right_brackets), 0].max %>px">
                <%= link_to @query_concept.right_operator, '#', style: 'color:#404040;text-decoration:none', data: { object: 'operand-edit', value: "#{@query_concept.id}" } %>
                <%= link_to 'edit', '#', data: { object: 'operand-edit', value: "#{@query_concept.id}" }, id: "query_concept_#{@query_concept.id}_right_operator_edit_icon", style: 'display:none', class: 'btn btn-mini' %>
              </span>
              <span id="query_concept_<%= @query_concept.id %>_rop_select" style="display:none;padding-left:<%= [10*(@query_concept.level - @query_concept.right_brackets), 0].max %>px">
                <%= select_tag "query_concept_#{@query_concept.id}_right_operator", options_for_select(['and', 'or'].collect{|a| [a,a]}, @query_concept.right_operator), style: 'vertical-align:middle', name: 'right_operator', onchange: "changeRightOperator('#query_concept_#{@query_concept.id}_right_operator', #{@query_concept.id});" %>
                <%= link_to 'cancel', '#', data: { object: 'operand-hide', value: "#{@query_concept.id}" }, class: 'btn btn-mini', style: 'margin-top:-10px' %>
              </span>
              <br />
            </div>
          </div>
        </div>
      <% end %>
  <% end %>
<% end %>
