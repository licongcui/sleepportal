<% @title = @concept.short_name %>
<div class="page-header">
  <h1>
    <%= link_to 'Concepts', concepts_path %> &middot; <%= @title %>
    <%#= link_to "Edit Concept", edit_concept_path(@concept), class: 'btn btn-mini' %>
    <%#= link_to "Delete Concept", @concept, method: :delete, class: 'btn btn-mini btn-danger', data: { confirm: "Are you sure you want to delete Concept #{@concept.name}?" } %>
  </h1>
  <small><%= simple_format @concept.description %></small>
</div>

<dl class="dl-horizontal">
  <dt>Dictionary</dt>
  <dd><%= link_to @concept.dictionary.name, @concept.dictionary if @concept.dictionary %></dd>

  <dt>Display Name</dt>
  <dd><%= @concept.display_name %></dd>

  <dt>Short Name</dt>
  <dd><%= @concept.short_name %></dd>

  <dt>Labels</dt>
  <dd>
    <% @concept.terms.each do |term| %>
      <span class="label"><%= term.name %></span>
    <% end %>
  </dd>

  <dt>Concept Type</dt>
  <dd><%= @concept.concept_type %></dd>

  <dt>Units</dt>
  <dd><%= @concept.units %></dd>

  <dt>Formula</dt>
  <dd><%= @concept.formula %></dd>

  <dt>Source File</dt>
  <dd><%= @concept.source_file %></dd>

  <dt>Sensitivity</dt>
  <dd>
    <% if @concept.sensitivity != '0' %>
    <span class="label label-important">Sensitive</span>
    <p class="quiet small">This concept can ONLY be viewed or downloaded if you only have <span class='source_rule_text'>view data distribution</span> or <span class='source_rule_text'>download dataset</span> respectively.</p>
    <% else %>
    <span class="label">Non Sensitive</span>
    <% end %>
  </dd>

  <dt>Commonly Used</dt>
  <dd><%= @concept.commonly_used %></dd>

  <dt>Folder</dt>
  <dd><%= @concept.folder %></dd>

  <dt>Source Name</dt>
  <dd><%= @concept.source_name %></dd>

  <dt>Source Description</dt>
  <dd><%= simple_format @concept.source_description %></dd>

  <% if @concept.parents.size > 0 %>
    <dt>Parents</dt>
    <dd>
      <ul>
        <% @concept.parents.each do |parent| %>
          <li><%= link_to parent.human_name, parent %></li>
        <% end %>
      </ul>
    </dd>
  <% end %>

  <% if @concept.children.size > 0 %>
    <dt>Children</dt>
    <dd>
      <ul>
        <% @concept.children.each do |child| %>
          <li><%= link_to child.human_name, child %></li>
        <% end %>
      </ul>
    </dd>
  <% end %>

  <% if @concept.sources.size > 0 %>
    <dt>Sources</dt>
    <dd>
      <ul>
        <% @concept.sources.each do |source| %>
          <li><%= link_to source.name, source %></li>
        <% end %>
      </ul>
    </dd>
  <% end %>

</dl>

<%= form_tag info_concept_path(@concept), method: :post, remote: true, data: { object: 'form-load' } do %>
<% end %>

<%#= render partial: 'concepts/info' %>
<div id="distribution"></div>
